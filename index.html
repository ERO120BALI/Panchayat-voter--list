<!DOCTYPE html>
<html>
<head>
<title>Panchayat Voter List</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: Arial; background:#f4f6f9; padding:20px; }
h1 { text-align:center; }
input { width:100%; padding:10px; margin-bottom:15px; border-radius:6px; border:1px solid #ccc; }
.panchayat { background:#ffffff; padding:10px; margin:6px 0; border-radius:6px; cursor:pointer; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.wards { display:none; margin-left:15px; margin-bottom:10px; }
.wards a { display:block; padding:5px; text-decoration:none; color:blue; }
</style>
</head>
<body>

<h1>Panchayat Voter List</h1>
<input type="text" id="search" placeholder="Search Panchayat..." onkeyup="filterList()">

<div id="list"></div>

<script>

const repo = "ERO120BALI";   // ðŸ‘ˆ à¤†à¤ªà¤•à¤¾ à¤¸à¤¹à¥€ username
const project = "Panchayat-voter-list";

fetch(`https://api.github.com/repos/${repo}/${project}/contents`)
.then(res => res.json())
.then(data => {

  const container = document.getElementById("list");

  data.forEach(item => {
    if(item.type === "dir") {

      const div = document.createElement("div");
      div.className = "panchayat";
      div.innerText = item.name;

      const wardDiv = document.createElement("div");
      wardDiv.className = "wards";

      div.onclick = function() {

        if(wardDiv.innerHTML !== "") {
          wardDiv.style.display = wardDiv.style.display === "none" ? "block" : "none";
          return;
        }

        fetch(item.url)
        .then(res => res.json())
        .then(files => {
          files.forEach(file => {
            if(file.name.endsWith(".pdf")) {
              const link = document.createElement("a");
              link.href = file.download_url;
              link.target = "_blank";
              link.innerText = file.name;
              wardDiv.appendChild(link);
            }
          });
          wardDiv.style.display = "block";
        });

      };

      container.appendChild(div);
      container.appendChild(wardDiv);
    }
  });

});

function filterList() {
  let input = document.getElementById("search").value.toLowerCase();
  let items = document.getElementsByClassName("panchayat");
  for (let i = 0; i < items.length; i++) {
    if (items[i].innerText.toLowerCase().includes(input)) {
      items[i].style.display = "block";
    } else {
      items[i].style.display = "none";
    }
  }
}

</script>

</body>
</html>
